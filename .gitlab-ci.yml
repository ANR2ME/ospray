stages:
  - build
  - deploy

build-centos6-gcc:
  type: build
  script:
    - scripts/build_gitlab/linux.sh
  tags:
    - centos6
    - gcc
    - build

build-centos7-gcc:
  type: build
  script:
    - scripts/build_gitlab/linux.sh
  tags:
    - centos7
    - gcc
    - build

build-fedora-gcc:
  type: build
  script:
    - scripts/build_gitlab/linux.sh
  tags:
    - fedora
    - gcc
    - build

build-ubuntu-gcc:
  type: build
  script:
    - scripts/build_gitlab/linux.sh
  tags:
    - ubuntu
    - gcc
    - build

#build-ubuntu-clang:
#  type: build
#  script:
#    - export CC=clang
#    - export CXX=clang++
#    - scripts/build_gitlab/linux.sh
#  tags:
#    - ubuntu
#    - clang

build-sles-gcc:
  type: build
  script:
    - scripts/build_gitlab/linux.sh
  tags:
    - sles
    - gcc
    - build

build-osx-clang:
  type: build
  script:
    - scripts/build_gitlab/osx.sh
  tags:
    - osx
    - clang
    - build

release-test:
  type: deploy
  script:
    - export CC=gcc
    - export CXX=g++
    - export OSPRAY_RELEASE_NO_VERIFY=1
    - scripts/release/linux.sh
  tags:
    - icc
    - release
  only:
    - jda/release_test
  artifacts:
    paths:
      - build_release/*.gz
