SET(MODULE_TACHYON OFF CACHE BOOL "Build 'TACH' (tachyon model viewer)")

IF (MODULE_TACHYON)

	IF (NOT OSPRAY_MPI)
		MESSAGE("The 'TACH' module needs MPI support to be built in")
	ELSE()
		CONFIGURE_OSPRAY()
		CONFIGURE_MPI()

		INCLUDE_DIRECTORIES(${PROJECT_SOURCE_DIR}/ospray)
		INCLUDE_DIRECTORIES(${PROJECT_SOURCE_DIR}/ospray/include)
		INCLUDE_DIRECTORIES_ISPC(${PROJECT_SOURCE_DIR})
		INCLUDE_DIRECTORIES_ISPC(${PROJECT_SOURCE_DIR}/ospray)

		OSPRAY_ADD_LIBRARY(ospray_module_tach${OSPRAY_LIB_SUFFIX} SHARED
			geometry.cpp
			geometry.ispc
			)
		TARGET_LINK_LIBRARIES(ospray_module_tach${OSPRAY_LIB_SUFFIX} ospray${OSPRAY_LIB_SUFFIX})

		IF (NOT THIS_IS_MIC)
			ADD_EXECUTABLE(ospTachyon viewer model)
			TARGET_LINK_LIBRARIES(ospTachyon ospray ospray_glut3d)
		ENDIF()
	ENDIF()
ENDIF()
